<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />


    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
   
   
  	<link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

	<title>Sprint3 Thomas Ambrogini</title>
		
</head>
    
<body>
	<div id="top">
	<h1>LABORATORIO DI INGEGNERIA DEI SISTEMI SOFTWARE <font size="5"></font> </h1>
	</div>  
	
	<div class="body"> 
	<h2>Introduction</h2>
	<div  class="remark">
		Tema finale dell'esame di ingegneria dei sistemi software: WasteService
	</div>
	 
	<h2>Requirements</h2>
	
	<div class="remark">
	 
	<p>A company intends to build a <span class="blue">WasteService</span> for the <em>separate collection of waste</em>,  composed of a set of elements:</p>
	<ol class="arabic">
		<li><p>a service area (rectangular, flat) that includes:</p>
			<ul class="simple">
				<li><p>an <span class="blue">INDOOR</span> port, to enter waste material</p></li>
				<li><p>a <span class="blue">PlasticBox</span> container, devoted to store objects made of plastic, upto <strong>MAXPB</strong> kg of material.</p></li>
				<li><p>a <span class="blue">GlassBox</span> container, devoted to store objects made of glass, upto <strong>MAXGB</strong> kg of material.</p></li>
			</ul>
			<p>The service area is free from internal obstacles, as shown in the following picture:</p>
			<blockquote>
			<div><a class="reference internal image-reference" href="img/WasteServiceRoom.PNG"><img alt="img/WasteServiceRoom.PNG" class="align-center" src="img/WasteServiceRoom.PNG" style="width: 60%;" /></a>
			</div></blockquote>
		</li>
		<li><p>a DDR robot working as a <span class="blue">transport trolley</span>, that is intially situated in its <span class="blue">HOME</span> location.
		The transport trolley has  the form of a square of side length <strong>RD</strong>.</p>
		<p>The <cite>transport trolley</cite> is used to performa a <span class="blue">deposit action</span> that consists in the following phases:</p>
		<ol class="arabic simple">
		<li><p>pick up a waste-load from a <span class="blue">Waste truck</span> located on the <cite>INDOOR</cite></p></li>
		<li><p>go from the <cite>INDOOR</cite> to the proper waste container</p></li>
		<li><p>deposit the waste-load in the container</p></li>
	</ol>
	
	<li><p>a <span class="blue">Service-manager</span> (an human being) which supervises the state of the service-area by using a
	<span class="blue">WasteServiceStatusGUI</span>.</p></li>
	<li><p>a <span class="blue">Sonar</span> and a <span class="blue">Led</span> connected to a RaspnerryPi. The <cite>Led</cite> is used as a <em>warning devices</em>,
	according to the following scheme:</p>
	<ul class="simple">
	<li><p>the <cite>Led</cite> is <strong>off</strong> when the  <cite>transport trolley</cite> is at <cite>HOME</cite></p></li>
	<li><p>the <cite>Led</cite> <strong>blinks</strong> while the <cite>transport trolley</cite> is moving</p></li>
	<li><p>the <cite>Led</cite> is <strong>on</strong> when <cite>transport trolley</cite> is stopped.</p></li>
	</ul>
	<p>The <cite>Sonar</cite> is used as an alarm device: when it measures a distance less that a prefixed value <strong>DLIMT</strong>,
	the <cite>transport trolley</cite> must be stopped.
	It will be resumed when <cite>Sonar</cite> detects again a distance higher than  <strong>DLIMT</strong>.</p>
	</li>
	</ol>
	<section id="tfrequirements">
	<h2>TFRequirements</h2>
	<p>The main goal of the <span class="blue">WasteService</span> software is to allow a <span class="blue">Waste truck</span> to deposit its load of
	<strong>TruckLoad</strong> kg plastic or glass in the proper container.</p>
	<p>The global story can be described as follows:</p>
	<ol class="arabic simple">
	<li><p>The <cite>Waste truck</cite> driver approaches the <cite>INDOOR</cite> and sends (using a smart device) a request to store the load,
	by specifyng the <cite>type of  the material</cite> (plastic or glass) and its <cite>TruckLoad</cite>.</p></li>
	<li><p>The <cite>WasteService</cite> sends the answer <em>loadaccept</em> if the final content of proper container will not surpass the
	maximum value allowed (<em>MAXPB</em> or <em>MAXGB</em>). Otherwise, it sends the answer <em>loadrejecetd</em> and the  <cite>Waste truck</cite>
	leaves the <cite>INDOOR</cite> area.</p></li>
	<li><p>When the load is accepted, the <cite>transport trolley</cite> reaches the <cite>INDOOR</cite>, picks up the material, goes to the
	proper container and settles the material. During this activity, the <cite>WasteService</cite> <strong>blinks</strong> the <cite>Led</cite></p></li>
	<li><p>When the deposit action is terminated, the <cite>transport trolley</cite>  excutes another deposit command (if any)
	or returns to its <cite>HOME</cite>.</p></li>
	</ol>
	<p>The <cite>WasteService</cite> must create a <span class="blue">WasteServiceStatusGUI</span> that shows to the <em>Service-manager</em>:</p>
	<ul>
	<li><p>the current state of the <cite>transport trolley</cite> and it position in the room</p></li>
	<li><p>the current weigth of the material stored in the two waste-containers</p></li>
	<li><p>the current state of the <cite>Led</cite></p>
	
	</li>
	</ul>
	
	</div>
	
	 
	
	<h2>Requirement analysis</h2>
	
	<section id="glossario">
		<h3>Glossario<a class="headerlink" href="#glossario" title="Permalink to this headline">¶</a></h3>
			
			<ol class="arabic simple">
				<li>
					WasteTruck: camion che si approccia al sistema per poter depositare i materiali.
				</li>
				<li>
					WasteService: servizio centrale che si occupa di rispondere alle richieste del WasteTruck.
				</li>
				<li>
					DDR robot: Con il termine DDR (Differential Drive Robot) robot il commitente intende il robot del progetto unibo.basicrobot22
				</li>
				<li>
					Transport Trolley: Il transport trolley non è il DDR Robot, sono due entità distinte. Il trolley potrebbe sfruttare il DDR robot per 
					eseguire i movimenti necessari.
				</li>
				<li>
					Area di servizio: zona nella quale si muove il trolley con zone particolari:
					<ul>
						<li>
							INDOOR: area dove il trolley deve andare a raccogliere il materiali per il deposito.
						</li>
						<li>
							Home: punto di partenza del trolley.
						</li>
						<li>
							PlasticBox: area in cui è presente il contenitore per la plastica.
						</li>
						<li>
							GlassBox: area in cui è presente il contenitore per il vetro.
						</li>
					</ul>
				</li>

				<li>
					Led: spia luminosa.
				</li>
				
				<li>
					Sonar: sensore per misurare la distanza.
				</li>
				
				<li>
					Service-Manager: operatore umano che interagisce con la GUI.
				</li>
				
				<li>
					GUI: interfaccia grafica.
				</li>
			</ol>
	
	<div class="remark">
	<section id="requisiti-funzionali">
		<h3>Requisiti funzionali<a class="headerlink" href="#requisiti-funzionali" title="Permalink to this headline">¶</a></h3>
		
		
		Requisiti riguardanti GUI
		<ol class="arabic simple">
		All'interno della GUI devono essere visibili le seguenti informazioni:
			<li>
				<p><em>Trolley info</em>: stato attuale del trolley e posizione attuale.</p>	
			</li>
			<li>
				<p><em>Peso container</em>: il peso corrente di ciascun container.</p>	
			</li>
			<li>
				<p><em>Led info</em>: stato attuale del led.</p>	
			</li>
		</ol>
		
	<h4> Rappresentazione della posizione del trolley</h4>
	A seguito di un meeting con il committente si è stabilito che la posizione del trolley deve
	essere rappresentata nelle seguenti posizioni:
	
	<ul>
		<li>
			HOME
		</li>
		<li>
			INDOOR
		</li>
		<li>
			CONTAINER PLASTICA
		</li>
		<li>
			CONTAINER VETRO
		</li>
	</ul>
	
	<h4> Rappresentazione dello stato del trolley </h4>
	Lo stato del trolley può assumere tre valori differenti:
	<ul>
		<li>
			IDLE
		</li>
		<li>
			WORKING
		</li>
		<li>
			STOPPED
		</li>
	</ul>
	
	
	
	
	<h3> Problemi da analizzare</h3>
	
	<h4> STATO DI TROLLEY, LED, E BOX</h4>
	La GUI deve monitorare lo stato di TROLLEY, LED e BOX e bisogna, quindi, stabilire come ottenere
	tali informazioni.
	
	<h4> POSIZIONE DEL TROLLEY</h4>
	La GUI deve essere a conoscenza della posizione del trolley.
	
	<h4> REALIZZAZIONE DELLA GUI</h4>
	Che tipo di componente dovrebbe essere la GUI?
	
	
	</div>
	
	<h2>Problem analysis</h2>

	 
	 <div class="remark">
	 
	 
	 	<h3>STATO TROLLEY, LED E BOX</h3>
	 		La GUI deve mostrare a video lo stato di TROLLEY, LED e BOX. Per ottenere queste informazioni
	 		si hanno diverse possibilità. <br>
	 		
	 		Un primo tipo di comunicazione potrebbe essere una forma di polling, nella quale la GUI
	 		chiede ai vari componenti i valori interessati ogni intervallo di tempo. In questo caso
	 		si avrebbe una GUI che lavora attivamente per richiedere i dati degli altri componenti del
	 		sistema.<br>
	 		Si sconsiglia questo tipo di soluzione.
	 		
	 		<br>
	 		Tenendo in considerazione quello che è stato discusso nello Sprint2 è possibile sfruttare
	 		l'osservabilità CoAP degli attori del sistema per aggiornare le varie informazioni della GUI
	 		tramite un patter observer e non un lavoro svolto attivamente.
	 
		<h3>RAPPRESENTAZIONE DELLA POSIZIONE DEL TROLLEY</h3>
		Tra le informazioni che devono essere mostrate tramite la GUI vi è anche la posizione del trolley
		in ogni momento. <br>
		Come anticipato in analisi dei requisiti, il committente ha stabilito che è sufficiente un'informazione
		approssimata per quanto riguarda la posizione del trolley (INDOOR, PLASTIC, GLASS, HOME).<br>
		
		Per aggiornare la posizione si ricorda che il wasteService emette queste informazioni tramite
		CoAP.
	 
	 	
	 	
	 	<h3>REALIZZAZIONE DELLA GUI</h3>
	 	
	 	Essendo che un operatore umano (Service-manager) deve interagire con essa si hanno due possibilità
	 	principali:
	 	
	 	<ul>
	 		<li>
	 			Applicazione mobile: un'applicazione (che potrebbe essere per Android o IOS) che permetta
	 			di accedere alle informazioni specificate precedentemente.
	 		</li>
	 		<li>
	 			Applicazione Web: un'applicazione Web, accessibile attraverso browser.
	 		</li>
	 	</ul>
	 	
	 	Si consiglia la realizzazione della applicazione Web, non avendo nessuna richiesta specifica
	 	da parte del committente ed essendo più generale come soluzione.<br>
	 	Inoltre, nel caso in cui si realizzi un'applicazione REST, sarebbe facilmente estendibile con 
	 	una applicazione mobile.
	 	
	 	
	 </div>
	
	<h2>Test plans</h2> 
	
	<div class="remark">
		
		
		
	</div>
	
	
	
	<h2>Project</h2> 
	<div class="remark">
	
	Per la realizzazione della GUI si è optato per realizzare un'applicazione Web, tramite l'utilizzo del 
	framework Spring Boot.<br>
	Per evitare di dover ricaricare la pagina per ottenere l'aggiornamento delle informazioni si è deciso
	di utilizzare le WebSocket, che realizzano un canale di comunicazione tra due applicazioni,
	messe a disposizione in modo semplice da SpringBoot. <br>
	
	<h3> Lato SERVER </h3>
	
	<ul>
		<li>
			Configurer: affinchè l'applicazione Sprint inoltri le richieste di un client al server, è necessario
			registrare un gestore utilizzando una classe di configurazione che implementa l'interfaccia
			WebSocketConfigurer. <br>
			
			<a href="../gui/src/main/java/unibo/gui/WebSocketConfiguration.java" > WebSocketConfiguration </a> <br>
			
			In base alla configurazione, il server risponderà, con un'istanza di WebSocketHandler.
		</li>
		
		<li> 
			GUIWebSocketHandler: questa classe definisce un gestore custom di messaggi come specializzazione della
			classe astratta AbstractWebSocketHandler (o delle sue sottoclassi).<br>
			L'handler tiene traccia di ogni sessione di WebSocket attualmente attiva e contiene le CoapConnection
			ai componenti del sistema da osservare (wasteService, trolley, storageManager).
			
			<a href="../gui/src/main/java/unibo/gui/GuiWebSocketHandler.java" > GuiWebSocketHandler </a> <br>
		</li>
		
		<li>
			GuiApplication: permette a Spring di avviare tutti i componenti necessari.<br>
			<a href="../gui/src/main/java/unibo/gui/GuiApplication.java" > GuiApplication </a> <br>
		</li>
		
		<li>
			GuiController: essendo Spring basato sul pattern MVC, il controller permette di smistare
			le richieste. <br>
			<a href="../gui/src/main/java/unibo/gui/GuiController.java" > GuiController </a> <br>
		</li>
		
		<li>
			Utils: varie funzioni di utilità per semplificare la creazione di observer CoAP e di inviare
			i messaggi ai destinatari interessati.
			
		</li>
	
	</ul>
	
	
	<h3> Lato CLIENT</h3>
	<ul>
		<li>
			Interfaccia grafica dell'applicazione.
		</li>
		
		<li>
			Files JavaScript per realizzare la comunicazione tramite WebSocket lato Client.
		</li>
	
	</ul>
	
	
	</div>
	
	<h2>Testing</h2> 
	 
	
	<h2>Deployment</h2> 
	
	 
	<h2>Maintenance</h2> 
	 
	<!-- USEFUL
	<table style="width:100%" border="1">
	<tr>
	<td style="width:50%">
	</td>
	<td></td>
	</tr>
	</table>
	-->
		      	
	<br/><br/> 	

	
	<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
	By Thomas Ambrogini email: thomas.ambrogini@studio.unibo.it  
	<img src="./img/ThomasAmbrogini.jpg" alt="mbot" width="15%" height="15%">
	</div> 
</body>
</html>